!function(){window.StupidGsoClient=Ember.Application.create({LOG_TRANSITIONS:!0}),Ember.FEATURES["query-params"]=!0}(),function(){StupidGsoClient.FilterController=Ember.ArrayController.extend({filterString:"",filteredList:function(){var a=this.get("filterString").toLowerCase();return this.get("content").filter(function(b){return-1!==b.name.toLowerCase().indexOf(a)})}.property("content","filterString","content@each")})}(),function(){StupidGsoClient.TimetableBaseController=Ember.ArrayController.extend({filteredList:function(){for(var a=this.get("content"),b=[],c=0;15>=c;c++){b[c]=[];for(var d=0;5>=d;d++)b[c][d]=0==d?Ember.Object.create({content:c+1+"."}):null}for(var c=0;c<=a.length;c++){var e=a[c];void 0!=e&&(b[e.hour-1][e.day]=e)}return b}.property("content"),notEmpty:function(){return this.get("content").length}.property("content")})}(),function(){StupidGsoClient.ElementsController=StupidGsoClient.FilterController.extend({type:null})}(),function(){StupidGsoClient.TimetableController=StupidGsoClient.TimetableBaseController.extend({type:"",element:"",weeks:null})}(),function(){StupidGsoClient.WeeksController=Ember.ArrayController.extend({selected:null,contentObserver:function(){var a=this;Ember.$.getJSON("http://api.gso.medok.in/weeks-available.json").then(function(b){var c=a.get("selected"),d=[];b.forEach(function(a){a==c?d.push(c):d.push(a)}),a.set("content",d)})}.observes("selected"),currentWeek:function(){var a=new Date,b=new Date(a.valueOf()),c=(a.getDay()+6)%7;b.setDate(b.getDate()-c+3);var d=new Date(b.getFullYear(),0,4),e=(b-d)/864e5,f=1+Math.ceil(e/7);return f}.property()})}(),function(){StupidGsoClient.Store=DS.Store.extend({adapter:DS.FixtureAdapter.create()})}(),function(){StupidGsoClient.ElementRoute=Ember.Route.extend({model:function(a){return a.element_name}})}(),function(){StupidGsoClient.ElementsRoute=Ember.Route.extend({model:function(){var a=this.modelFor("type");return this.controllerFor("elements").set("type",a),Ember.$.getJSON("http://api.gso.medok.in/"+a+".json")}})}(),function(){StupidGsoClient.TimetableRoute=Ember.Route.extend({beforeModel:function(a){var b=this,c=this.controllerFor("weeks");void 0==a.week&&b.transitionTo("timetable",b.modelFor("element"),{queryParams:{week:c.get("currentWeek")}})},model:function(a,b){var c=this.controllerFor("timetable"),d=this.controllerFor("weeks"),e=this.modelFor("type"),f=this.modelFor("element");return c.set("type",e),c.set("element",f),c.set("weeks",d),d.set("selected",b.week),Ember.$.getJSON("http://api.gso.medok.in/timetable/"+e+"/"+f+"/"+b.week+"/week.json")}})}(),function(){StupidGsoClient.TypeRoute=Ember.Route.extend({model:function(a){return a.type_name}})}(),function(){StupidGsoClient.TypesRoute=Ember.Route.extend({model:function(){return[Em.Object.create({name:"classes",text:"Klassen"}),Em.Object.create({name:"teachers",text:"Lehrer"}),Em.Object.create({name:"rooms",text:"RÃ¤ume"})]}})}(),function(){StupidGsoClient.Router.map(function(){this.resource("types",{path:"/"}),this.resource("type",{path:"/:type_name"},function(){this.resource("elements",{path:"/elements"}),this.resource("element",{path:"/:element_name"},function(){this.resource("timetable",{path:"/timetable",queryParams:["week"]})})}),this.resource("pages",{path:"/p"},function(){this.route("about"),this.route("legal")})})}();